!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(5),i=n.n(r),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e=e?new Date(e):new Date,Math.floor(e.getTime()/1e3)},s=function(e){return 86400*parseInt(e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({isDebugMode:!1,logger:console,prompter:window},e),n=t.isDebugMode,r=(t.logger,t.prompter);return{apply:function(e,t){var n,r;if("object"===(void 0===e?"undefined":o(e))){if(e.hasOwnProperty("and")&&Array.isArray(e.and)){for(r=0;r<e.and.length;r++)if(!(n=this.apply(e.and[r],t)))return n;return n}if(e.hasOwnProperty("or")&&Array.isArray(e.or)){for(r=0;r<e.or.length;r++)if(n=this.apply(e.or[r],t))return n;return n}if(e.hasOwnProperty("not"))return!this.apply(e.not,t)}var i=t(e);return"object"===(void 0===i?"undefined":o(i))?this.apply(i,t):i},compare:function(e,t,n,r){return this.standardCompareFunction(e,t,n,r)},standardCompareFunction:function(e,t,o,c){var u,d,l,f;if("path"===e){var p=/(^\/*|\/*$)/g;"string"==typeof t&&(t=t.replace(p,"")),"string"==typeof c&&(c=c.replace(p,"")),e="string"}if("string"===e)switch(d=t||"",l=c||"",o){case"equals":return d===c;case"does not equal":return d!==c;case"contains":return d.indexOf(l)>-1;case"does not contain":return-1===d.indexOf(l);case"starts with":return d.substr(0,l.length)===l;case"ends with":return d.indexOf(l,d.length-l.length)>-1;case"glob":return i()(l).test(d)}else if("array"===e){var g=function(e,t){if(!(Array.isArray(e)&&e.length&&Array.isArray(t)&&t.length))return!1;for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)if(n.hasOwnProperty(t[i]))return!0;return!1};switch(d=t||[],o){case"include":case"includes":for(f=0;f<d.length;f++)if(d[f]==c)return!0;return!1;case"include any":case"includes any":return g(d,c);case"do not include":case"does not include":for(f=0;f<d.length;f++)if(d[f]==c)return!1;return!0;case"do not include any":case"does not include any":return!g(d,c)}}else if("boolean"===e){if("is_true"===o)return!0===t;if("is_false"===o)return!1===t}else if("date"===e){if("ever"===o)return!0;if(u=o.match(/^this (\d+) days?$/))return a(t)>=a()-s(u[1])}return"y"===(n&&r.prompt("StdCompare. Got: "+JSON.stringify([].slice.apply(arguments))+". y/n?"))}}}},function(e,t,n){(function(t,r){!function(t,n){e.exports=n()}(0,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(){return void 0!==P?function(){P(s)}:a()}function a(){var e=setTimeout;return function(){return e(s,1)}}function s(){for(var e=0;e<M;e+=2)(0,H[e])(H[e+1]),H[e]=void 0,H[e+1]=void 0;M=0}function c(e,t){var n=this,r=new this.constructor(d);void 0===r[V]&&T(r);var i=n._state;if(i){var o=arguments[i-1];F(function(){return S(i,r,o,n._result)})}else I(n,r,e,t);return r}function u(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return y(n,e),n}function d(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function p(e){try{return e.then}catch(e){return J.error=e,J}}function g(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function m(e,t,n){F(function(e){var r=!1,i=g(n,t,function(n){r||(r=!0,t!==n?y(e,n):w(e,n))},function(t){r||(r=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,_(e,i))},e)}function h(e,t){t._state===z?w(e,t._result):t._state===W?_(e,t._result):I(t,void 0,function(t){return y(e,t)},function(t){return _(e,t)})}function v(e,t,n){t.constructor===e.constructor&&n===c&&t.constructor.resolve===u?h(e,t):n===J?(_(e,J.error),J.error=null):void 0===n?w(e,t):i(n)?m(e,t,n):w(e,t)}function y(t,n){t===n?_(t,l()):e(n)?v(t,n,p(n)):w(t,n)}function b(e){e._onerror&&e._onerror(e._result),x(e)}function w(e,t){e._state===Y&&(e._result=t,e._state=z,0!==e._subscribers.length&&F(x,e))}function _(e,t){e._state===Y&&(e._state=W,e._result=t,F(b,e))}function I(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+z]=n,i[o+W]=r,0===o&&e._state&&F(x,e)}function x(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?S(n,r,i,o):i(o);e._subscribers.length=0}}function E(){this.error=null}function O(e,t){try{return e(t)}catch(e){return Q.error=e,Q}}function S(e,t,n,r){var o=i(n),a=void 0,s=void 0,c=void 0,u=void 0;if(o){if((a=O(n,r))===Q?(u=!0,s=a.error,a.error=null):c=!0,t===a)return void _(t,f())}else a=r,c=!0;t._state!==Y||(o&&c?y(t,a):u?_(t,s):e===z?w(t,a):e===W&&_(t,a))}function C(e,t){try{t(function(t){y(e,t)},function(t){_(e,t)})}catch(t){_(e,t)}}function k(){return X++}function T(e){e[V]=X++,e._state=void 0,e._result=void 0,e._subscribers=[]}function N(){return new Error("Array Methods must be provided an Array")}function N(){return new Error("Array Methods must be provided an Array")}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function A(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var R=void 0,L=R=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},M=0,P=void 0,B=void 0,F=function(e,t){H[M]=e,H[M+1]=t,2===(M+=2)&&(B?B(s):G())},$="undefined"!=typeof window?window:void 0,D=$||{},q=D.MutationObserver||D.WebKitMutationObserver,U="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,H=new Array(1e3),G=void 0;G=U?function(){return t.nextTick(s)}:q?function(){var e=0,t=new q(s),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():K?function(){var e=new MessageChannel;return e.port1.onmessage=s,function(){return e.port2.postMessage(0)}}():void 0===$?function(){try{var e=n(12);return P=e.runOnLoop||e.runOnContext,o()}catch(e){return a()}}():a();var V=Math.random().toString(36).substring(16),Y=void 0,z=1,W=2,J=new E,Q=new E,X=0,Z=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[V]||T(this.promise),L(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&w(this.promise,this._result))):_(this.promise,N())}return e.prototype._enumerate=function(e){for(var t=0;this._state===Y&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===u){var i=p(e);if(i===c&&e._state!==Y)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===ee){var o=new n(d);v(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===Y&&(this._remaining--,e===W?_(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;I(e,void 0,function(e){return n._settledAt(z,t,e)},function(e){return n._settledAt(W,t,e)})},e}(),ee=function(){function e(t){this[V]=k(),this._result=this._state=void 0,this._subscribers=[],d!==t&&("function"!=typeof t&&j(),this instanceof e?C(this,t):A())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,n=t.constructor;return t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return ee.prototype.then=c,ee.all=function(e){return new Z(this,e).promise},ee.race=function(e){var t=this;return new t(L(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},ee.resolve=u,ee.reject=function(e){var t=new this(d);return _(t,e),t},ee._setScheduler=function(e){B=e},ee._setAsap=function(e){F=e},ee._asap=F,ee.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=ee},ee.Promise=ee,ee})}).call(t,n(10),n(11))},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return a});var r=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(e){for(var t=document.cookie.split("; "),n=t.length-1;n>=0;n--){var i=t[n].split("="),o=r(i,2),a=o[0],s=o[1];if(a===e)return s}},o=function(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})},a=function(e,t){return!(!e||!t)&&(e.endsWith("/")&&!t.endsWith("/")?t+="/":!e.endsWith("/")&&t.endsWith("/")&&(e+="/"),e.toLowerCase()===t.toLowerCase())}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.a=function(e,t,n){var i=void 0,o=void 0;try{switch(r(window.CustomEvent)){case"function":i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});break;case"object":(i=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n);break;default:(i=document.createEvent("Event")).detail=n,i.initEvent(t,!0,!0)}o=e.dispatchEvent(i)}catch(e){}return o}},function(e,t,n){"use strict";var r=n(1),i=n.n(r);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2500;return new i.a(function(r,i){var o=new XMLHttpRequest;o.open(e,t),o.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)try{r(JSON.parse(this.responseText))}catch(e){i()}else try{i(JSON.parse(this.responseText))}catch(e){i()}},o.send(),void 0!==n&&window.setTimeout(function(){i("Ran out of time")},n)})}},function(e,t){e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),i="",o=!!t&&!!t.extended,a=!!t&&!!t.globstar,s=!1,c=t&&"string"==typeof t.flags?t.flags:"",u=0,d=r.length;u<d;u++)switch(n=r[u]){case"\\":case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":i+="\\"+n;break;case"?":if(o){i+=".";break}case"[":case"]":if(o){i+=n;break}case"{":if(o){s=!0,i+="(";break}case"}":if(o){s=!1,i+=")";break}case",":if(s){i+="|";break}i+="\\"+n;break;case"*":for(var l=r[u-1],f=1;"*"===r[u+1];)f++,u++;var p=r[u+1];a?f>1&&("/"===l||void 0===l)&&("/"===p||void 0===p)?(i+="(?:[^/]*(?:/|$))*",u++):i+="[^/]*":i+=".*";break;default:i+=n}return c&&~c.indexOf("g")||(i="^"+i+"$"),new RegExp(i,c)}},function(e,t,n){"use strict";t.a={each:function(e,t){!function e(t,n){var r=t.and||t.or;if(r){for(var i=0;i<r.length;i++)if(!1===e(r[i],n))return!1}else if(t.not){if(e(t.not,n))return!1}else if(!1===n(t))return!1}(e,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=(n.n(r),n(9)),o={goals:[{id:"gol_55fdrta2",name:"Clicks on My new RightBar",events:[{id:"gev_aqutjsp4",page:[{path:"",domain:"*"}],type:"CLICK",selector:"div#right-bar-rbr_gtfkmdbp a.rm-goal-target"}],isVisibleToUser:!1}],version:"2018-01-01",campaigns:[],rightBars:[{id:"rbr_gtfkmdbp",name:"My new RightBar",parts:{text:"",buttonText:"",backgroundColor:"#E84393",foregroundColor:"#ffffff",buttonBackgroundColor:"#531F1F",buttonForegroundColor:"#ffffff"},goalIds:["gol_55fdrta2"],isActive:!0,variants:[{id:"rbv_7cb09f89",parts:{text:"Subscribe to our weekly newsletter to stay tuned!",buttonUrl:"https://digest.appcoda.com",buttonText:"Check it out!"},isEnabled:!0,segmentId:"seg_scpv77pg"},{id:"rbv_i67k85pp",parts:{text:"Subscribe to our weekly newsletter to stay tuned!",buttonUrl:"http://digest.appcoda.com",buttonText:"Check it out!"},isEnabled:!0,segmentId:"seg_co42rgw6"},{id:"rbv_30yua6dx",parts:{text:"Subscribe to our weekly newsletter to stay tuned!",buttonUrl:"http://digest.appcoda.com",buttonText:"Check it out!"},isEnabled:!0,segmentId:"seg_huiaq7uh"},{id:"rbv_42c1fe5q",parts:{text:"Want to learn Swift and iOS development?",buttonUrl:"https://www.appcoda.com/swift",buttonText:"Get our Swift book!"},isEnabled:!0,segmentId:"seg_fseg3qy6"}],blacklist:[{path:"",domain:"*"}],condition:!0,whitelist:[{path:"*",domain:"*"}],dimensionId:"dim_0hut9y7v",businessTypeId:"DIGITAL_PRODUCTS",isBrandingHidden:!1,isBlacklistEnabled:!1,isWhitelistEnabled:!1,lastPublishedActiveAt:"2018-06-18T17:20:01+00:00"}],dimensions:[{id:"dim_0hut9y7v",name:"Lifecycle Funnel",signals:[{weight:"explicit",indicates:"seg_scpv77pg",definition:{or:[{and:[{$type:"tags",tagIds:["Swift Beginner Pro Customer (iOS 11)","Swift Beginner Complete Customer (iOS 10)"],$source:"drip",operator:"include any"}]}]}},{weight:"explicit",indicates:"seg_co42rgw6",definition:{or:[{and:[{$type:"tags",tagIds:["Intermediate Book Customer (iOS 9)","Objective-C Book Customer","Swift 1-Day Workshop Customer","RSS App Template v1.0 Customer","RSS App Template v2.0 Customers","Swift Beginner Book Customer (iOS 10)","Swift Beginner Book Customer (iOS 11 Chinese)","Swift Beginner Book Customer (iOS 11)","Swift Beginner Starter Customer (iOS 10)","Swift Beginner Starter Customer (iOS 11 Chinese)","Swift Beginner Starter Customer (iOS 11)","Swift Book Customer (iOS 9)","Swift Intermediate Book Customer (iOS 10)","Swift Intermediate Book Customer (iOS 11)","Swift Intermediate Chinese Book Customer (iOS 10)","Swift Intermediate Chinese Book Customer (iOS 11)"],$source:"drip",operator:"include any"}]}]}},{weight:"explicit",indicates:"seg_huiaq7uh",definition:{or:[{and:[{$type:"tags",tagIds:["7 day Swift course subscriber","App Marketing Lead","Swift Chinese Book Lead","Intermediate Swift Book Leads","Swift 1-Day Workshop Lead","swift book leads","Swift Book Leads"],$source:"drip",operator:"include any"},{$type:"custom",$source:"referrer",operator:"does not equal",custom_referrer:"https://www.appcoda.com/swift"},{$type:"custom",$source:"referrer",operator:"does not equal",custom_referrer:"https://www.appcoda.com/swift/"}]}]}},{weight:"explicit",indicates:"seg_fseg3qy6",definition:{or:[{and:[{$type:"isAnonymous",$source:"drip"},{$type:"custom",$source:"referrer",operator:"does not equal",custom_referrer:"https://www.appcoda.com/swift"},{$type:"custom",$source:"referrer",operator:"does not equal",custom_referrer:"https://www.appcoda.com/swift/"}]}]}}],segments:[{id:"seg_scpv77pg",name:"VIP Customer"},{id:"seg_co42rgw6",name:"Customer"},{id:"seg_huiaq7uh",name:"Subscriber"},{id:"seg_fseg3qy6",name:"Anonymous"}],semanticType:"LIFECYCLE_STAGES_V2"}],team_pid:1568838328},a={RM_EVENT_LISTENER_ORIGIN:"https://app.rightmessage.com",RM_INJECTED_SCRIPT_SRC:"https://app.rightmessage.com/js/inj.js",KEEN_IO_PROJECT_ID:"5a57e30fc9e77c000104c003",KEEN_IO_WRITE_KEY:"EDE675294B2C1117CA6D72DFA26E77BD1CAF52682851B43FAECCAAE1FB7876F4",MAYBELOGGEDIN_CHECKER_URL:"https://loginchecker.rightmessage.com",ADMINVISITOR_FETCH_URL:"https://app.rightmessage.com/adminvisitor"};Object(i.a)({config:o,vars:a}).go()},function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){return this.indexOf(e,t)>-1}}),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0})},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(1),a=n.n(o),s=n(13),c=n.n(s),u=(n(4),n(3)),d=n(14),l=n(15),f=n(16),p=n(19),g=n(2),m=n(20),h=n(0),v=n(6),y=n(21),b=n(22),w=n(23),_=n(24),I=n(25),x=n(26),E=n(27),O=n(28),S=n(29),C=n(31),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.a=function(e){return{go:function(){function t(e){return e&&e.replace(/^https?:/,window.location.protocol)}function n(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode&&n.parentNode.insertBefore(t,n),Object(u.a)(document,"rm:add-script",{src:e})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent.postMessage(k({},t,{action:e}),"*")}function s(e){return ee.apply(e,function(e){if(!Object.keys(e).length)return!1;var t=W[e.$source];return t&&t.check?t.check(e):"y"===(window.rmpanda.debug&&window.prompt("Got: "+JSON.stringify(e)+". y/n?"))})}function T(t){Object.keys(t).forEach(function(e){var n=t[e];Q[e]="function"==typeof n.visitorContext?n.visitorContext(B):{}},{}),e.forcedSegmentIds&&e.forcedSegmentIds.forEach(function(e){Q.segments[e]=!0,Object(u.a)(document,"rm:forced-segment-id",{segmentId:e})})}function N(e){return z.tim(e,Q)}function j(){var e=Object.keys(Q.segments||{}).filter(function(e){return!0===Q.segments[e]});(B.dimensions||[]).filter(function(e){return e.syncTo}).forEach(function(t){t.signals.filter(function(t){return e.includes(t.indicates)}).forEach(function(e){var n=Object(m.a)(e.definition,t.syncTo);if(n){var r=W[t.syncTo];r&&r.syncUp&&r.syncUp(n)}})}),Object.keys(Q.segments||{}).forEach(function(e){})}function A(e){["rmcloak"].concat(r(e?["rmcloak-stay"]:[])).forEach(function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t),Object(u.a)(document,"rm:remove-dom-node",{id:e})});var t=document.createElement("style");t.innerHTML=".rmtempinvisible { visibility: visible !important; }",document.head&&document.head.appendChild(t)}var R=void 0,L=function(e){throw e},M=new a.a(function(e,t){R=e,L=t}),P=e.config,B=void 0===P?{}:P,F=e.vars,$=(F=void 0===F?{}:F).RM_EVENT_LISTENER_ORIGIN,D=void 0===$?"MISSING":$,q=F.RM_INJECTED_SCRIPT_SRC,U=void 0===q?"MISSING":q,K=F.KEEN_IO_PROJECT_ID,H=void 0===K?"MISSING":K,G=F.KEEN_IO_WRITE_KEY,V=void 0===G?"MISSING":G;F.MAYBELOGGEDIN_CHECKER_URL,F.ADMINVISITOR_FETCH_URL,D=t(D),U=t(U),J={timestamp:function(e){return e=e||new Date,Math.floor(e.getTime()/1e3)},uuid:function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},debug:{}},Object.keys(console).forEach(function(e){"function"==typeof console[e]&&(J.debug[e]=function(){var t;window.rmpanda.debug&&(t=console)[e].apply(t,arguments)})});var Y=function(e){return function(t){var n=!1;return(t.dimensions||[]).some(function(t){return(t.signals||[]).some(function(t){return v.a.each(t.definition||{},function(t){if(t.$source===e)return n=!0,!1}),n}),n}),n}},z={};z.findAndReplaceDOMText=c.a,z.tim=function(){var e=/{{\s*([a-z0-9_][\\.a-z0-9_]*)\s*}}/gi;return function(t,n){return t.replace(e,function(e,t){for(var r=t.split("."),i=r.length,o=n,a=0;a<i;a++){if(void 0===(o=o[r[a]]))return"";if(a===i-1)return o||""}})}}();var W,J,Q={},X=new d.a({storage:localStorage});X.load();var Z=new l.a({window:window,config:B,visitorContext:Q,storage:localStorage,projectId:H,writeKey:V});if(window.rmpanda=window.rmpanda||{},window.rmpanda.debug=window.rmpanda.debug||/rmdebug=1/.test(window.location.search),window.rmpanda.personalizationForced=window.rmpanda.debug||e.forcePersonalization,window.rmpanda.tagPids=window.rmpanda.tagPids||[],window.rmpanda.tagPids.indexOf(B.team_pid)>=0)return Object(u.a)(document,"rm:refusing-to-run-twice"),L("Woah! It seems the RightMessage tag for team "+B.team_pid+" is being run more than once. Please double-check your site and/or tag manager to ensure that this is not happening."),M;window.rmpanda.tagPids.push(B.team_pid);var ee=Object(h.a)({isDebugMode:window.rmpanda.debug,logger:J.debug,prompter:window});W={holdbacks:X,referrer:Object(b.a)({logger:J.debug,logicEngine:ee}),query:Object(y.a)({logger:J.debug,logicEngine:ee}),utm:Object(w.a)({logger:J.debug,logicEngine:ee}),device:Object(_.a)({logger:J.debug,logicEngine:ee}),segments:Object(O.a)({logger:J.debug,config:B,logicEngine:ee,segmentDefinitionApplies:s}),currentpage:Object(I.a)({logger:J.debug,logicEngine:ee}),pageviews:Object(x.a)({logger:J.debug,logicEngine:ee}),jsdata:Object(E.a)({windowObject:window,logger:J.debug,logicEngine:ee}),activecampaign:Object(S.a)({name:"activecampaign",enabled:Y("activecampaign"),identifyingQueryParam:"rm_ac",teamPid:B.team_pid}),convertkit:Object(S.a)({name:"convertkit",enabled:Y("convertkit"),identifyingQueryParam:"ck_subscriber_id",identifyingCookieName:"ck_subscriber_id",teamPid:B.team_pid}),infusionsoft:Object(S.a)({name:"infusionsoft",enabled:Y("infusionsoft"),identifyingQueryParam:"rm_isoft",teamPid:B.team_pid}),hubspot:Object.assign(Object(S.a)({name:"hubspot",enabled:Y("hubspot"),teamPid:B.team_pid}),{prepopulate:function(e){var t=this;return this._persistSubscriberIdFromQueryParameter("rm_hs")?this._getDataFromMiddleman():new a.a(function(e,t){window._hsq=window._hsq||[],window._hsq.push(function(t){e(t&&t.utk&&t.utk.visitor||null)}),window.setTimeout(function(){e(null)},2500)}).then(function(e){return e&&t._persistSubscriberId(e),t._getDataFromMiddleman()})}}),drip:Object.assign(Object(S.a)({name:"drip",enabled:Y("drip"),teamPid:B.team_pid}),{_data:{tags:[],customFields:{},anonymous:!0,email:null},prepopulate:function(e){var t=this;return new a.a(function(e,n){window.setTimeout(function(){e()},2500),window._dcq=window._dcq||[],window._dcq.push(["identify",{success:function(n){Object.assign(t,{_isAnonymous:void 0===n.anonymous||n.anonymous,_tagIds:n.tags||[],_customFields:n.custom_fields||{},_listIds:n.lists||[],_email:n.email||null}),t._data={anonymous:t._isAnonymous,tags:t._tagIds,customFields:t._customFields,lists:t._listIds,email:t._email},e()},failure:function(t){e()}}])})},syncUp:function(e){var t=e.partnerName,n=e.fieldName,r=e.fieldValue;"drip"===t&&n&&r&&"string"==typeof n&&"string"==typeof r&&!["email","new_email","user_id","tags","remove_tags","prospect","success","failure"].includes(n)&&(window._dcq=window._dcq||[],window._dcq.push(["identify",i({},n,r)]))}})};var te=0;if(window.frameElement&&"IFRAME"==window.frameElement.nodeName||window.self!==window.top){var ne=window.rmpanda.directUrl||window.location.href;o("rm-hello",{url:ne=ne.replace(/(\?|&)rmcachebuster\d+=\d+/,""),pid:B.team_pid}),te=5e3,window.addEventListener("message",function(e){Object(g.b)(e.origin,D)&&(window.rmpanda.hastaLaVistaBaby=!0,"rm-inject-script"===e.data.action&&n(U))}),window.addEventListener("beforeunload",function(){o("rm-goodbye-from-tag",{pid:B.team_pid})})}setTimeout(function(){if(window.rmpanda.hastaLaVistaBaby)return Object(u.a)(document,"rm:hastaLaVistaBaby"),void R();Object(u.a)(document,"rm:start-init");var e=Object.keys(W).map(function(e){return W[e]}).filter(function(e){return e.install}).map(function(e){Object(u.a)(document,"rm:sources:will-install",e),e.install&&e.install()});W.pageviews.savePageView();var t=re(W,B,J);a.a.all(e).then(function(){return t}).then(function(){Object(u.a)(document,"rm:sources:ready"),T(W),Object(u.a)(document,"rm:visitor-context:ready"),j(),ce(oe),ce(ae)}).catch(function(e){J.debug.error(e),A(!1)}).finally(function(){Z.install(),Object(u.a)(document,"rm:end-init"),R()})},te);var re=function(e,t,n){return Object.keys(e).map(function(t){return{name:t,source:e[t],priority:e[t].prepopulationPriority||0}}).filter(function(e){var r=e.name,i=e.source,o="function"==typeof i.prepopulate&&(void 0===i.enabled||i.enabled(t));return n.debug.log((o?"Yes let's":"We won't")+" prepopulate",r),o}).sort(function(e,t){var n=e.priority;return t.priority-n}).reduce(function(e,t){var n=t.name,r=t.source,i=t.priority,o=e.find(function(e){return e.priority===i});return o||(o={priority:i,sources:[]},e.push(o)),o.sources.push({name:n,source:r}),e},[]).map(function(e){var r=e.priority,i=e.sources;return function(){return n.debug.log("Prepopulating priority",r,"sources..."),a.a.all(i.map(function(e){var r=e.name,i=e.source;return n.debug.log("Prepopulating source:",r),Object(u.a)(document,"rm:sources:will-prepopulate",{name:r,source:i}),i.prepopulate&&i.prepopulate(t)}))}}).reduce(function(e,t){return e.then(t)},a.a.resolve())},ie=function(e){return!(!e.goal_ids||0===e.goal_ids.length)&&X.isInCampaignHoldback(e.id)},oe=function(){var e=Q.segments,t=B.campaigns,n=void 0===t?[]:t,r=B.goals,i=void 0===r?[]:r,o=B.dimensions||[];o.forEach(function(t){J.debug.log("[Dimension] "+t.name+" (Type: "+t.semanticType+")"),(t.segments||[]).forEach(function(t){var n=e[t.id];J.debug.log("    [Segment] "+t.name+": "+n)})}),n.filter(function(e){return!0===e.condition||s(e.condition)}).forEach(function(t){var n=t.id,r=t.dimension_id,a=t.goal_ids,s=ie(t),c=o.find(function(e){return e.id===r}),d=(c&&c.segments||[]).find(function(t){return e[t.id]}),l=d&&d.id;(a||[]).map(function(e){return i.find(function(t){return t.id===e})}).filter(function(e){return!!e}).forEach(function(e){var t=e.id,r=e.events;(void 0===r?[]:r).forEach(function(r){var i=r.id,o=r.type,a=r.selector;if(se(r.page))switch(o){case"PAGEVIEW":Object(u.a)(document,"rm:goals:converted",{goalId:e.id,eventId:r.id}),Z.recordConversion({campaignId:n,segmentId:l,holdback:s,goalId:t,goalEventId:i});break;case"CLICK":case"SUBMIT":var c=o.toLowerCase(),d=a?[].slice.call(document.querySelectorAll(a)):[];Object(u.a)(document,"rm:goals:attach-event",{goalId:e.id,eventId:r.id}),d.forEach(function(o){o.addEventListener(c,function(){Object(u.a)(document,"rm:goals:converted",{goalId:e.id,eventId:r.id}),Z.recordConversion({campaignId:n,segmentId:l,holdback:s,goalId:t,goalEventId:i})})});break;default:J.debug.log("[Error] Unknown event type '"+o+"'")}})})})},ae=function(){var e=Q.segments,t=Object.keys(e).filter(function(t){return e[t]}),n=t,r=[];if(J.debug.log("Campaigns:",B.campaigns||[]),B.rightBars&&B.rightBars.length>0&&B.rightBars[0].isActive){var i=B.rightBars[0],o=i.variants.find(function(e){return e.isEnabled&&t.includes(e.segmentId)});if(o){var a=B.team_pid,c=J.debug,d=se(Object(p.b)(o.parts.buttonUrl)),l=!i.isWhitelistEnabled||se(i.whitelist),g=!!i.isBlacklistEnabled&&se(i.blacklist);if(!d&&l&&!g){var m=B.goals,h=void 0===m?[]:m,v=Object(C.a)({rightBar:i,goals:h,metrics:Z,teamPid:a,logger:c});v.show(o.id),v.attachGoalConversionEvents(o.segmentId),Z.recordRightBarExposure({rightBarId:i.id,segmentId:o.segmentId})}}}(B.campaigns||[]).filter(function(e){return!0===e.condition||s(e.condition)}).forEach(function(e){var n,i,o=e.id,a=e.actions,s=void 0===a?[]:a,c={id:o,actions:s,appliedThings:[]};J.debug.log("[Campaign] "+e.name),s.filter(function(e){return se(e.page)}).reduce(function(r,a){switch(a.$type){case"MODIFY_ELEMENT":var s=[].slice.call(document.querySelectorAll(a.selector)),d=a.variations.filter(function(e){var n=t.includes(e.segment_id);return n||J.debug.log("    [Action] Not running (Reason: inactive segment) using selector '"+a.selector+"' and not applying modifications ",e.modifications),n}).reduce(function(t,r){if(n=r.segment_id,!X.isExposedToCampaign(o)){var d=Math.random()<=.1;X.recordExposure(o,d)}if((i=ie(e))&&!window.rmpanda.personalizationForced)J.debug.log("    [Action] Not running (Reason: holdback) using selector '"+a.selector+"' and not applying modifications ",r.modifications);else{c.appliedThings.push({action:a,variation:r}),Object(u.a)(document,"rm:campaigns:apply-action",{actionId:a.id});var l=r.modifications;i?J.debug.log("    [Action] Running (holdback, but personalization forced) on "+s.length+" elements using selector '"+a.selector+"' and applying modifications ",l):J.debug.log("    [Action] Running on "+s.length+" elements using selector '"+a.selector+"' and applying modifications ",l),Object.keys(l).forEach(function(e){var t=l[e],n=f.a[e];n&&s.forEach(function(e){return n.apply(e,t,N)})})}return!0},!1);return r||d;default:return r}},!1)&&Z.recordCampaignExposure({campaignId:o,segmentId:n,holdback:i}),c.appliedThings.length&&r.push(c)}),A(!0),"function"==typeof window.rmpanda.rmtempinit&&window.rmpanda.rmtempinit({config:B,rmtempAppliedDimensions:n,rmtempAppliedCampaigns:r})},se=function(e){var t={domain:window.location.hostname,path:window.location.pathname};return Object(p.a)(t,e)},ce=function(e){"loading"!==document.readyState?e():document.addEventListener&&document.addEventListener("DOMContentLoaded",e)};return M}}}},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function a(){m&&p&&(m=!1,p.length?g=p.concat(g):h=-1,g.length&&s())}function s(){if(!m){var e=i(a);m=!0;for(var t=g.length;t;){for(p=g,g=[];++h<t;)p&&p[h].run();h=-1,t=g.length}p=null,m=!1,o(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var d,l,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var p,g=[],m=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t)),1!==g.length||m||i(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){},function(e,t,n){var r,i;!function(o,a){"object"==typeof e&&e.exports?e.exports=a():void 0!==(i="function"==typeof(r=a)?r.call(t,n,t,e):r)&&(e.exports=i)}(0,function(){function e(e){return String(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function t(){return n.apply(null,arguments)||r.apply(null,arguments)}function n(e,n,i,o,a){if(n&&!n.nodeType&&arguments.length<=2)return!1;var s="function"==typeof i;s&&(i=function(e){return function(t,n){return e(t.text,n.startIndex)}}(i));var c=r(n,{find:e,wrap:s?null:i,replace:s?i:"$"+(o||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(o>0){var n=e[o];e.index+=e[0].indexOf(n),e[0]=n}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:a});return t.revert=function(){return c.revert()},!0}function r(e,t){return new i(e,t)}function i(e,n){var r=n.preset&&t.PRESETS[n.preset];if(n.portionMode=n.portionMode||o,r)for(var i in r)s.call(r,i)&&!s.call(n,i)&&(n[i]=r[i]);this.node=e,this.options=n,this.prepMatch=n.prepMatch||this.prepMatch,this.reverts=[],this.matches=this.search(),this.matches.length&&this.processMatches()}var o="retain",a=document,s={}.hasOwnProperty;return t.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},t.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},t.NON_INLINE_PROSE=function(e){return s.call(t.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},t.PRESETS={prose:{forceContext:t.NON_INLINE_PROSE,filterElements:function(e){return!s.call(t.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},t.Finder=i,i.prototype={search:function(){function t(e){for(var a=0,u=e.length;a<u;++a){var d=e[a];if("string"==typeof d){if(o.global)for(;n=o.exec(d);)s.push(c.prepMatch(n,r++,i));else(n=d.match(o))&&s.push(c.prepMatch(n,0,i));i+=d.length}else t(d)}}var n,r=0,i=0,o=this.options.find,a=this.getAggregateText(),s=[],c=this;return o="string"==typeof o?RegExp(e(o),"g"):o,t(a),s},prepMatch:function(e,t,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=n+e.index+e[0].length,e.startIndex=n+e.index,e.index=t,e},getAggregateText:function(){function e(r){if(r.nodeType===Node.TEXT_NODE)return[r.data];if(t&&!t(r))return[];var i=[""],o=0;if(r=r.firstChild)do{if(r.nodeType!==Node.TEXT_NODE){var a=e(r);n&&r.nodeType===Node.ELEMENT_NODE&&(!0===n||n(r))?(i[++o]=a,i[++o]=""):("string"==typeof a[0]&&(i[o]+=a.shift()),a.length&&(i[++o]=a,i[++o]=""))}else i[o]+=r.data}while(r=r.nextSibling);return i}var t=this.options.filterElements,n=this.options.forceContext;return e(this.node)},processMatches:function(){var e,t,n,r=this.matches,i=this.node,o=this.options.filterElements,a=[],s=i,c=r.shift(),u=0,d=0,l=0,f=[i];e:for(;;){if(s.nodeType===Node.TEXT_NODE&&(!t&&s.length+u>=c.endIndex?t={node:s,index:l++,text:s.data.substring(c.startIndex-u,c.endIndex-u),indexInMatch:0===u?0:u-c.startIndex,indexInNode:c.startIndex-u,endIndexInNode:c.endIndex-u,isEnd:!0}:e&&a.push({node:s,index:l++,text:s.data,indexInMatch:u-c.startIndex,indexInNode:0}),!e&&s.length+u>c.startIndex&&(e={node:s,index:l++,indexInMatch:0,indexInNode:c.startIndex-u,endIndexInNode:c.endIndex-u,text:s.data.substring(c.startIndex-u,c.endIndex-u)}),u+=s.data.length),n=s.nodeType===Node.ELEMENT_NODE&&o&&!o(s),e&&t){if(s=this.replaceMatch(c,e,a,t),u-=t.node.data.length-t.endIndexInNode,e=null,t=null,a=[],c=r.shift(),l=0,d++,!c)break}else if(!n&&(s.firstChild||s.nextSibling)){s.firstChild?(f.push(s),s=s.firstChild):s=s.nextSibling;continue}for(;;){if(s.nextSibling){s=s.nextSibling;break}if((s=f.pop())===i)break e}}},revert:function(){for(var e=this.reverts.length;e--;)this.reverts[e]();this.reverts=[]},prepareReplacementString:function(e,t,n){var r=this.options.portionMode;return"first"===r&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var r;switch(t){case"&":r=n[0];break;case"`":r=n.input.substring(0,n.startIndex);break;case"'":r=n.input.substring(n.endIndex);break;default:r=n[+t]||""}return r}),"first"===r?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,t){var n=this.options.replace||"$&",r=this.options.wrap,i=this.options.wrapClass;if(r&&r.nodeType){var o=a.createElement("div");o.innerHTML=r.outerHTML||(new XMLSerializer).serializeToString(r),r=o.firstChild}if("function"==typeof n)return(n=n(e,t))&&n.nodeType?n:a.createTextNode(String(n));var s="string"==typeof r?a.createElement(r):r;return s&&i&&(s.className=i),(n=a.createTextNode(this.prepareReplacementString(n,e,t))).data&&s?(s.appendChild(n),s):n},replaceMatch:function(e,t,n,r){var i,o,s=t.node,c=r.node;if(s===c){var u=s;t.indexInNode>0&&(i=a.createTextNode(u.data.substring(0,t.indexInNode)),u.parentNode.insertBefore(i,u));var d=this.getPortionReplacementNode(r,e);return u.parentNode.insertBefore(d,u),r.endIndexInNode<u.length&&(o=a.createTextNode(u.data.substring(r.endIndexInNode)),u.parentNode.insertBefore(o,u)),u.parentNode.removeChild(u),this.reverts.push(function(){i===d.previousSibling&&i.parentNode.removeChild(i),o===d.nextSibling&&o.parentNode.removeChild(o),d.parentNode.replaceChild(u,d)}),d}i=a.createTextNode(s.data.substring(0,t.indexInNode)),o=a.createTextNode(c.data.substring(r.endIndexInNode));for(var l=this.getPortionReplacementNode(t,e),f=[],p=0,g=n.length;p<g;++p){var m=n[p],h=this.getPortionReplacementNode(m,e);m.node.parentNode.replaceChild(h,m.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(m,h)),f.push(h)}var v=this.getPortionReplacementNode(r,e);return s.parentNode.insertBefore(i,s),s.parentNode.insertBefore(l,s),s.parentNode.removeChild(s),c.parentNode.insertBefore(v,c),c.parentNode.insertBefore(o,c),c.parentNode.removeChild(c),this.reverts.push(function(){i.parentNode.removeChild(i),l.parentNode.replaceChild(s,l),o.parentNode.removeChild(o),v.parentNode.replaceChild(c,v)}),v}},t})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=t.storage;r(this,e),this.storage=n,this.data={}}return i(e,[{key:"load",value:function(){try{var e=this.storage.getItem("rmpanda.holdbacks");this.data=JSON.parse(e)||{}}catch(e){this.save()}}},{key:"save",value:function(){try{var e=JSON.stringify(this.data);this.storage.setItem("rmpanda.holdbacks",e)}catch(e){}}},{key:"recordExposure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.data[e]=t,this.save()}},{key:"isExposedToCampaign",value:function(e){return void 0!==this.data[e]}},{key:"isInCampaignHoldback",value:function(e){return!!this.data[e]}},{key:"visitorContext",value:function(){return this.data}}]),e}();t.a=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(1),o=n.n(i),a=n(2),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{in:Object.keys(e).filter(function(t){return e[t]}),notIn:Object.keys(e).filter(function(t){return!e[t]})}},d=function(){function e(t){var n=t.window,i=t.config,a=t.storage,s=t.visitorContext,c=t.projectId,u=t.writeKey;r(this,e),Object.assign(this,{config:i,projectId:c,storage:a,visitorContext:s,window:n,writeKey:u}),this.getClient=o.a.reject("must install first"),this._installed=!1,this.queue=[]}return c(e,[{key:"flush",value:function(){var e=this,t=[].concat(this.queue).map(function(t){return e._send(t).then(function(){return e._remove(t),o.a.resolve()})});return o.a.all(t)}},{key:"load",value:function(){var e=this;return(JSON.parse(this.storage.getItem("rmpanda.q"))||[]).forEach(function(t){return e.queue.push(t)}),this.flush()}},{key:"recordCampaignExposure",value:function(e){var t=e.campaignId,n=e.segmentId,r=e.holdback;return this._recordEvent("exposure",{campaignId:t,segmentId:n,holdback:r})}},{key:"recordConversion",value:function(e){var t=e.campaignId,n=e.segmentId,r=e.holdback,i=e.goalId,o=e.goalEventId;return this._recordEvent("conversion",{campaignId:t,segmentId:n,holdback:r,goalId:i,goalEventId:o})}},{key:"recordRightBarConversion",value:function(e){var t=e.rightBarId,n=e.segmentId,r=e.goalId,i=e.goalEventId;return this._recordEvent("conversion",{rightBarId:t,segmentId:n,goalId:r,goalEventId:i})}},{key:"recordRightBarExposure",value:function(e){var t=e.rightBarId,n=e.segmentId;return this._recordEvent("exposure",{rightBarId:t,segmentId:n})}},{key:"install",value:function(){var e=this;if(this._installed)return o.a.resolve();if("undefined"!=typeof KeenTracking)this.KeenTracking=KeenTracking;else{var t=this.window,n=t.document;!function(e,r,i){var o,a=!!t.Keen&&t.Keen;i[e]=i[e]||{ready:function(r){var s,c=n.getElementsByTagName("head")[0],u=n.createElement("script"),d=t;u.onload=u.onerror=u.onreadystatechange=function(){if(!(u.readyState&&!/^c|loade/.test(u.readyState)||s)){if(u.onload=u.onreadystatechange=null,s=1,o=d.Keen,a)d.Keen=a;else try{delete d.Keen}catch(e){d.Keen=void 0}i[e]=o,i[e].ready(r)}},u.async=1,u.src="https://d26b395fwzu5fz.cloudfront.net/keen-tracking-1.1.3.min.js",c.parentNode.insertBefore(u,c)}}}("KeenTracking",0,this)}return new o.a(function(t,n){e.KeenTracking.ready(function(){var n=new e.KeenTracking({projectId:e.projectId,writeKey:e.writeKey});e.getClient=o.a.resolve(n),e._installed=!0,t()})}).then(function(){return e.flush()}).then(function(){return o.a.resolve()})}},{key:"_recordEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["events",s({type:e},n,{teamPid:""+this.config.team_pid,page:{url:this._urlData(location.href),referrer:this._urlData(document.referrer),title:document.title},visitor:{id:this._visitorId(),segments:this._segments(),holdbacks:this._holdbacks()},keen:{timestamp:(new Date).toISOString()}})],i=this._push(r);return this._installed&&(i=i.then(function(){return t._send(r)}).then(function(){return t._remove(r)})),i}},{key:"_push",value:function(e){return this.queue.push(e),this._save(),o.a.resolve(e)}},{key:"_remove",value:function(e){var t=this.queue.indexOf(e);return t>=0&&this.queue.splice(t,1),this._save(),o.a.resolve(e)}},{key:"_save",value:function(){return this.storage.setItem("rmpanda.q",JSON.stringify(this.queue)),o.a.resolve()}},{key:"_send",value:function(e){var t=this;return new o.a(function(n,r){t.getClient.then(function(t){var i=e.concat(function(e,t){t?n(t):r(e)});t.recordEvent.apply(t,i)}).catch(function(e){r(e)})})}},{key:"_holdbacks",value:function(){return u(this.visitorContext.holdbacks)}},{key:"_segments",value:function(){return u(this.visitorContext.segments)}},{key:"_urlData",value:function(e){if(/^https?:\/\//.test(e)){var t=["protocol","hostname","pathname","search","hash"],n=this.window.document.createElement("a");return n.href=e,t.reduce(function(e,t){return e[t]=n[t],e},{})}}},{key:"_visitorId",value:function(){var e=this.storage.getItem("rmpanda.sources.metrics.visitorId");return e||(e=Object(a.c)(),this.storage.setItem("rmpanda.sources.metrics.visitorId",e)),e}}]),e}();t.a=d},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return d});n(2);var i,o=n(17),a=n(18),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=Object.freeze({DROPDOWN:"dropdown",BOOL:"bool",COLOR:"color",FILE:"file",HTML:"html",URL:"url",CLASSES:"classes",ARRAY_INPUT:"arrayInput"}),u=Object.freeze({FORM_ACTION:"formAction",BACKGROUND_COLOR:"backgroundColor",BACKGROUND_IMAGE:"backgroundImage",COLOR:"color",HREF:"href",IFRAME_SOURCE:"iframeSrc",IMAGE_SOURCE:"imageSrc",STYLE:"style",CLASSES:"classes",HTML:"text",VISIBILITY:"visibility"}),d=(i={},r(i,u.FORM_ACTION,{name:"Form destination",model:u.FORM_ACTION,type:c.URL,icon:"fa-link",apply:function(e,t,n){e.action="string"==typeof t?n(t):t}}),r(i,u.BACKGROUND_COLOR,{name:"Background color",model:u.BACKGROUND_COLOR,type:c.COLOR,icon:"fa-paint-brush",apply:function(e,t,n){e.style.backgroundColor="string"==typeof t?n(t):t}}),r(i,u.BACKGROUND_IMAGE,{name:"Background image",model:u.BACKGROUND_IMAGE,type:c.URL,icon:"fa-image",apply:function(e,t,n){e.style.backgroundImage="string"==typeof t?n(t):t},isInUse:function(e){return!!e.style.backgroundImage}}),r(i,u.COLOR,{name:"Text color",model:u.COLOR,type:c.COLOR,icon:"fa-pencil",apply:function(e,t,n){e.style.color="string"==typeof t?n(t):t}}),r(i,u.HREF,{name:"Destination URL",model:u.HREF,type:c.URL,icon:"fa-link",apply:function(e,t,n){e.href="string"==typeof t?n(t):t}}),r(i,u.IFRAME_SOURCE,{name:"Source URL",model:u.IFRAME_SOURCE,type:c.URL,icon:"fa-link",apply:function(e,t,n){e.src="string"==typeof t?n(t):t}}),r(i,u.IMAGE_SOURCE,{name:"Image URL",model:u.IMAGE_SOURCE,type:c.URL,icon:"fa-image",apply:function(e,t,n){e.src="string"==typeof t?n(t):t}}),r(i,u.STYLE,{name:"Additional styles",model:u.STYLE,type:c.ARRAY_INPUT,modificationTypeOptions:{schema:[{name:"$arrayInput_ObjectKey",placeholder:["e.g. opacity","e.g. background-color","e.g. font-size","e.g. transform"]},{name:"$arrayInput_ObjectValue",placeholder:["0.5","#00ff99","1.5em","rotate(90deg)"]}]},icon:"fa-pencil",apply:function(e,t,n){if("object"===(void 0===t?"undefined":s(t)))for(var r in t)if(r&&t.hasOwnProperty(r))try{var i=t[r];e.style[r]="string"==typeof i?n(i):i}catch(e){}}}),r(i,u.CLASSES,{name:"CSS Classes",model:u.CLASSES,type:c.CLASSES,icon:"fa-paint-brush",apply:function(e,t){e.className=Object(o.a)(e.className,t)}}),r(i,u.HTML,{name:"Text",model:u.HTML,type:c.HTML,icon:"fa-align-left",apply:function(e,t,n){e.innerHTML="string"==typeof t?n(t):t}}),r(i,u.VISIBILITY,{name:"Visibility",model:"visibility",type:c.DROPDOWN,modificationTypeOptions:{dropdownValues:[{id:"",caption:"Don't modify"},{id:"show",caption:"Show"},{id:"hide",caption:"Hide"}],dropdownPlaceholder:"Don't modify"},icon:"fa-eye",apply:function(e,t){"show"===t?(e.style.display=a.a.includes(e.tagName.toLowerCase())?"inline":"block",e.style.visibility="visible"):"hide"===t&&(e.style.display="none",e.style.visibility="hidden")}}),i),l=[u.VISIBILITY,u.CLASSES,u.STYLE],f=["BLOCKQUOTE","BUTTON","H1","H2","H3","H4","H5","H6","LABEL","LI","P","PRE","Q","SPAN","TD","TH"];Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(f.map(function(e){return r({},e,[u.HTML].concat(l))})),[{A:[u.HREF,u.HTML].concat(l),AUDIO:[u.VISIBILITY],FORM:[u.FORM_ACTION,u.HTML,u.VISIBILITY],IFRAME:[u.IFRAME_SOURCE,u.VISIBILITY],IMG:[u.IMAGE_SOURCE,u.VISIBILITY],INPUT:[].concat(l),VIDEO:[u.VISIBILITY]}]))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t){var n=function(e){var t=(e||"").replace(/\./g," .").replace(/[., ]+/g," ").split(" ").filter(function(e){return e.length});return t.filter(function(e,n){return t.indexOf(e)===n})},r=n(e),i=n(t.add).filter(function(e){return r.indexOf(e)<0}),o=n(t.remove);return r.concat(i).filter(function(e){return o.indexOf(e)<0}).join(" ")}},function(e,t,n){"use strict";t.a=["a","abbr","acronym","b","bdo","big","br","button","cite","code","dfn","em","i","img","input","kbd","label","map","object","q","samp","script","select","small","span","strong","sub","sup","textarea","time","tt","var"]},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});var r=n(5),i=n.n(r),o=function(e){var t=document.createElement("a");return t.href=e,{domain:t.hostname,path:t.pathname.replace(/^\//,"").replace(/\/$/,"")}},a=function(e){var t=e.domain,n=e.path,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Array.isArray(r)||(r=[r]),n=n.replace(/^\//,"").replace(/\/$/,"");var o=!0,a=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value,l="*"===d.domain||d.domain===t.trim(),f=i()(d.path.replace(/^\//,"").replace(/\/$/,"")).test(n);if(l&&f)return!0}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return!1}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(6),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o={drip:function(e){return"drip"===e.$source&&"customField"===e.$type&&"equals"===e.operator&&e.customFieldId&&e.value?{fieldName:e.customFieldId,fieldValue:e.value}:null},activecampaign:function(e){return null}},a=function(e,t){var n=null;return r.a.each(e,function(e){if(e.$source===t){var r=o[t]&&o[t](e);if(r&&n)return n=null,!1;n=r}}),n?i({partnerName:t},n):null}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{check:function(e){return{$source:"pageviews",$type:"query",query:e.query,operator:e.operator,value:e.value,occurrence:e.occurrence}}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{check:function(e){var t,n;return"domain"===e.$type?(t="glob",n="*://"+e.domain+"*"):(t=e.operator,n=e.custom_referrer),{$source:"pageviews",$type:"referrer",operator:t,value:n,occurrence:"first"}}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{check:function(e){return{$source:"query",query:e.$type,operator:e.operator,value:e.value,occurrence:e.occurrence}}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{check:function(e){return!1}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({location:window.location,logger:console},e),n=t.location,i=t.logger,o=Object.assign({logicEngine:Object(r.a)({logger:i})},e).logicEngine;return{check:function(e){return"path"===e.$type&&o.compare("path",n.pathname,e.operator,e.value)}}}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}n.d(t,"a",function(){return a});var i=n(0),o=n(3),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({localStorage:window.localStorage,localStorageKey:"rmpanda.pageviews",location:window.location,logger:console,referrer:document.referrer},e),n=t.localStorage,a=t.localStorageKey,s=t.location,c=t.logger,u=t.referrer,d=Object.assign({logicEngine:Object(i.a)({logger:c})},e).logicEngine,l=function(){for(var e=void 0,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(t," "))},i=s.search.substring(1),o={};e=n.exec(i);)o[r(e[1])]=r(e[2]);return o};return{check:function(e){var t=void 0,i=void 0,o=void 0,s=void 0,c=void 0,u=void 0,l=void 0,f=void 0,p=void 0,g=JSON.parse(n.getItem(a)||"[]");if("landingpage"===e.$type&&(e=Object.assign({},e,{$type:"path",occurrence:"first"})),i=e.occurrence.match(/^any( (\d+))?$/)){o=i[2]||1,s=0;for(var m=0;m<g.length;m++)if(p=g[m],!e.timeframe||d.compare("date",new Date(1e3*p.time),e.timeframe)){switch(e.$type){case"path":f="path",u=p.path,l=e.value;break;case"query":f="string",u=p.query[e.query],l=e.value;break;case"referrer":f="string",u=p.referrer.replace(/\/$/,""),l=e.value.replace(/\/$/,"")}if(d.compare(f,u,e.operator,l)&&++s>=o)break}return s>=o}if("first"===e.occurrence){if(!g.length)return!1;c=g[0]}else if("last"===e.occurrence){if(!g.length)return!1;c=g[g.length-1]}else{if("first touch"!==e.occurrence&&"last touch"!==e.occurrence)return!1;var h=[].concat(r(g));if("first touch"!==e.occurrence&&h.reverse(),-1===(t=h.findIndex(function(t){return"query"===e.$type?t.query.hasOwnProperty(e.query):!!t.referrer})))return!1;c=h[t]}switch(e.$type){case"path":f="path",u=c.path,l=e.value;break;case"query":f="string",u=c.query[e.query],l=e.value;break;case"referrer":f="string",u=c.referrer.replace(/\/$/,""),l=e.value.replace(/\/$/,"")}return d.compare(f,u,e.operator,l)},savePageView:function(){Object(o.a)(document,"rm:sources:page-view:save-page-view");var e=JSON.parse(n.getItem(a)||"[]");e.push({path:s.pathname,referrer:u,time:Math.floor((new Date).getTime()/1e3),query:l()}),n.setItem(a,JSON.stringify(e))}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({logger:{log:function(){}},windowObject:{}},e),n=t.logger,o=t.windowObject,a=Object.assign({logicEngine:Object(r.a)({logger:n})},e).logicEngine;return{check:function(e){if("windowVariable"===e.$type){for(var t=(e.variable||"").split("."),n=o;t.length;){if("object"!==(void 0===n?"undefined":i(n))){n=void 0;break}n=n[t.shift()]}return a.compare("string",n,e.operator,e.value)}return!1}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({config:{},logger:{log:function(){}},segmentDefinitionApplies:function(){return!1}},e),n=t.config,i=t.logger,o=t.segmentDefinitionApplies,a=Object.assign({logicEngine:Object(r.a)({logger:i})},e).logicEngine,s={},c=!1,u={},d=function(e){if(!s.hasOwnProperty(e.id))if(u.hasOwnProperty(e.id))s[e.id]={};else{u[e.id]=!0;var t={},n=!1;(e.segments||[]).forEach(function(r){var i=r.id,a=!1;if(!n||e.isMultiWinning){var s=(e.signals||[]).filter(function(e){return e.indicates===i}).map(function(e){return e.definition});a=o({or:s})}t[i]=a,a&&(n=!0)}),s[e.id]=t,delete u[e.id]}};return{prepopulationPriority:0,prepopulate:function(){return(n.dimensions||[]).forEach(d),c=!0,Promise.resolve()},visitorContext:function(){if(!c)throw"this source must be prepopulated first";return Object.keys(s).reduce(function(e,t){return Object.assign(e,s[t]||{})},{})},check:function(e){var t=(n.dimensions||[]).find(function(t){return t.id===e.$type});if(!t)return!1;d(t);var r=Object.keys(s[t.id]||{}).filter(function(e){return s[t.id][e]});return a.compare("array",r,e.operator,e.segmentId)}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n.n(r),o=n(2),a=n(0),s=n(30),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({history:window.history,localStorage:window.localStorage,location:window.location,logger:window.console,middlemanFactory:s.a},e),n=t.history,r=t.identifyingQueryParam,c=t.identifyingCookieName,u=t.enabled,d=t.localStorage,l=t.location,f=t.logger,p=t.middlemanFactory,g=t.name,m=t.teamPid,h=Object.assign({logicEngine:Object(a.a)({logger:f})},e).logicEngine,v=p({teamPid:m,name:g}),y=function(e){var t,r,i,o=new RegExp("([?&])("+e+"=([^&]+)&?)");return(t=(l.search||"").match(o))?(r=t[3],n.replaceState&&(i=l.search.replace(o,"$1").replace(/&$/,"").replace(/^\?$/,""),n.replaceState(n.state,"",l.origin+l.pathname+i+l.hash)),r):null};return{_tagIds:[],_customFields:{},_listIds:[],_isAnonymous:!0,_email:null,enabled:u,prepopulationPriority:100,_persistSubscriberId:function(e){d.setItem("rmpanda.sources."+g+".subscriberId",e)},_getPersistedSubscriberId:function(){return d.getItem("rmpanda.sources."+g+".subscriberId")},_persistSubscriberIdFromQueryParameter:function(e){var t=y(e);return!!t&&(this._persistSubscriberId(t),!0)},_persistSubscriberIdFromCookie:function(e){var t=Object(o.a)(e);return!!t&&(this._persistSubscriberId(t),!0)},_getDataFromMiddleman:function(){var e=this,t=this._getPersistedSubscriberId();return t?v(t).then(function(t){e._tagIds=(t.tags||[]).map(function(e){return e.id}),e._customFields=(t.customFields||[]).reduce(function(e,t){return e[t.id]=t.value,e},{}),e._listIds=(t.lists||[]).map(function(e){return e.id}),e._isAnonymous=!1,e._email=t.email}).catch(function(t){return e._tagIds=[],e._customFields={},e._listIds=[],e._isAnonymous=!0,e._email=null,i.a.resolve()}).then(function(){return{tagIds:e._tagIds,customFields:e._customFields,listIds:e._listIds,isAnonymous:e._isAnonymous,email:e._email}}):i.a.resolve({})},prepopulate:function(){return r?(this._persistSubscriberIdFromQueryParameter(r)||c&&this._persistSubscriberIdFromCookie(c),this._getDataFromMiddleman()):(f.log("partner source '"+g+" has no identifyingQueryParam; cannot prepopulate"),i.a.resolve({}))},check:function(e){switch(e.$type){case"customField":return h.compare("string",this._customFields[e.customFieldId],e.operator,e.value);case"tags":return h.compare("array",this._tagIds,e.operator,e.tagIds);case"lists":return h.compare("array",this._listIds,e.operator,e.listIds);case"isAnonymous":return h.compare("boolean",this._isAnonymous,"is_true");case"isSubscriber":return h.compare("boolean",this._isAnonymous,"is_false")}},visitorContext:function(){return JSON.parse(JSON.stringify({tagIds:this._tagIds,customFields:this._customFields,listIds:this._listIds,isAnonymous:this._isAnonymous,email:this._email,urlEncodedEmail:encodeURIComponent(this._email||"")}))}}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(4),i=function(e){var t=e.teamPid,n=e.name;return function(e){return Object(r.a)("GET","https://dmm.rightmessage.com/"+t+"/"+n+"/"+e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(e){var t=e||{},n=t.parentNode,i=void 0===n?document.body:n,o=t.rightBar,a=t.goals,s=t.metrics,c=t.teamPid,u=t.logger,d="right-bar-"+String(o&&o.id),l=function(e,t,n){var r=document.querySelector(t);if(!r){r=document.createElement(e);var i=!0,o=!1,a=void 0;try{for(var s,c=Object.keys(n)[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;r.setAttribute(u,n[u])}}catch(e){o=!0,a=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}return r},f=function(e){var t=l("style","#rb-styles",{id:"rb-styles",type:"text/css"});t.innerText=".rm-rb-wrapper, .rm-rb-wrapper * {all: initial; font-family: museo-sans, sans-serif !important; font-size: 14px !important; box-sizing: border-box !important; }.rm-rb-wrapper {display: block !important; height: 48px !important; overflow: hidden !important; position: relative; top: 0 !important; left: 0 !important; right: 0 !important; padding: 11px !important; z-index: 9999999 !important; text-align: center !important; }.rm-text {display: block !important;text-align: center !important;overflow: hidden !important; max-width: 100% !important; white-space: nowrap !important; text-overflow: ellipsis !important; position: relative !important; top: -4px !important; line-height: 12px !important; }.rm-goal-target {display: inline-block !important; border-radius: 2.5px !important; border-width: 1px !important; max-width: 100% !important; margin: 0 0 0 5px !important; padding: 5px 10px !important; cursor: pointer !important; line-height: 10px !important; overflow: hidden !important; white-space: nowrap !important; text-overflow: ellipsis !important; }.rm-goal-target:hover {text-decoration: none !important; }.rm-branding {display: none !important;position: absolute !important; top: 0 !important; right: 0 !important; padding: 16px !important; line-height: 16px !important; cursor: pointer !important; }.rm-branding a {display: block !important; color: inherit !important; text-decoration: none !important; cursor: pointer !important; }.rm-branding span {font-size: 12px !important; font-weight: 100 !important; cursor: pointer !important; }.rm-branding span:first-of-type {opacity: 0.8 !important; }.rm-branding img {margin: -5px 4px !important; height: 16px !important; width: 16px !important; cursor: pointer !important; }.rm-branding span:last-of-type {text-decoration: underline !important; }@media all and (min-width: 992px) {.rm-rb-wrapper {display: flex !important; justify-content: center; padding: 11px 170px !important; }.rm-branding {display: block !important; }.rm-branding.rm-branding-hidden {display: none !important; }.rm-text {display: inline-block !important; line-height: 18px !important; top: 5px !important; }.rm-goal-target {line-height: 16px !important; }}";var n=document.getElementsByTagName("script")[0];n&&n.parentNode&&n.parentNode.insertBefore(t,n)},p=function(){if(d&&i&&o){var e=l("div","#"+d+".rm-rb-wrapper",{id:d,class:"rm-rb-wrapper"});i===document.body&&(e.style.position="fixed"),i.appendChild(e);var t=l("span","#"+d+" span.rm-text",{class:"rm-text"});e.appendChild(t);var n=l("a","#"+d+" a.rm-goal-target",{class:"rm-goal-target"});e.appendChild(n);var r=l("div","#"+d+" div.rm-branding",{class:"rm-branding"+(o.isBrandingHidden?" rm-branding-hidden":"")});return r.innerHTML='<a target="_blank" href="https://rightmessage.com/tools/rightbar?utm_source=referral&utm_medium=rightbar&utm_campaign='+(c||"")+'">\n                <span>Powered by</span><img src="https://tag.rightmessage.com/logo.svg"><span>RightBar</span></a>',e.appendChild(r),{$bar:e,$text:t,$button:n,$branding:r}}};return{getMergedParts:function(e){var t=Object.assign({},o.parts),n=this.getVariantParts(e);return n&&["backgroundColor","foregroundColor","text","buttonBackgroundColor","buttonForegroundColor","buttonText","buttonUrl"].forEach(function(e){var r=!!n[e]&&n[e];t[e]=r||t[e]}),t},getVariantParts:function(e){var t=(o.variants||[]).find(function(t){return t.id===e});return t&&t.parts},show:function(e){var t=p(),n=this.getMergedParts(e);if(f(),t){var r=t.$bar,o=t.$text,a=t.$button,s=t.$branding;if(Object.assign(r.style,{backgroundColor:n.backgroundColor}),o.innerHTML=n.text,Object.assign(o.style,{color:n.foregroundColor}),a.setAttribute("href",n.buttonUrl),a.innerHTML=n.buttonText,Object.assign(a.style,{backgroundColor:n.buttonBackgroundColor,borderColor:n.buttonBackgroundColor,color:n.buttonForegroundColor}),s&&[].slice.call(s.querySelectorAll("a, img, span")).forEach(function(e){Object.assign(e.style,{color:n.foregroundColor})}),i){var c=parseInt(window.getComputedStyle(i).getPropertyValue("padding-top")||0),l=parseInt(r.offsetHeight),g=c+l;i.style.paddingTop=g+"px";var m=function(e){return e>=0},h=function(e){if("absolute"!==window.getComputedStyle(e).position)return!1;for(var t=e.parentNode;t instanceof Element;t=t.parentNode)if(["fixed","absolute","relative"].includes(window.getComputedStyle(t).position))return!1;return!0},v=function(e,t){return"fixed"===window.getComputedStyle(e).position&&y(t)},y=function(e){return e<=l},b=function(e){return"true"===e.getAttribute("data-rb-moved")},w=function(e,t){return m(t)&&(h(e)||v(e,t))},_=function(){i.querySelectorAll("*:not(#"+d+")").forEach(function(e){var t=parseInt(window.getComputedStyle(e).getPropertyValue("top"))||0;!b(e)&&w(e,t)?(e.style.top=t+l+"px",e.setAttribute("data-rb-moved","true")):b(e)&&!w(e,t)&&(e.style.top=t-l+"px",e.removeAttribute("data-rb-moved"))})};_(),setTimeout(function(){new MutationObserver(function(e){_()}).observe(i,{attributes:!0,attributeFilter:["class"],childList:!0,subtree:!0}),_()},1e3),u.log("[RightBar] Loaded")}}},attachGoalConversionEvents:function(e){var t=o.id;(o.goalIds||[]).map(function(e){return a.find(function(t){return t.id===e})}).filter(function(e){return!!e}).forEach(function(n){if(n){var i=n.id,o=n.events,a=void 0===o?[]:o;u.log("    [Goal] "+n.name),a.forEach(function(n){if(n){var o=n.id,a=n.type,c=n.selector;switch(a){case"CLICK":var d=a.toLowerCase(),l=c?[].slice.call(document.querySelectorAll(c)):[];u.log("        [Event] "+a+" event attached to "+l.length+" elements using selector '"+c+"'."),Object(r.a)(document,"rm:goals:attach-event",{goalId:i,eventId:o}),l.forEach(function(n){n.addEventListener(d,function(){Object(r.a)(document,"rm:goals:converted",{goalId:i,eventId:o}),s.recordRightBarConversion({rightBarId:t,segmentId:e,goalId:i,goalEventId:o})})});break;default:u.log("[Error] Unknown event type '"+a+"'")}}})}})},hide:function(){}}}}]);
